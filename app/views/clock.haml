!!!5
%html{:lang => "en"}
  %head
    %meta{:charset => "utf-8"}
    %meta{:content => "IE=edge,chrome=1", "http-equiv" => "X-UA-Compatible"}
    %meta{:content => "width=device-width,initial-scale=1", :name => "viewport"}
    %title FHS Clock
    %link{:href => "/humans.txt", :rel => "author", :type => "text/plain"}
    %link{:href => "/css/application.css", :rel => "stylesheet"}
    - if settings.video["enabled"] == true
      :css
        body { background-color: #000000; }
    - else
      - if !@wallpaper.blank?
        :css
          body { background: url("/gridfs/#{@wallpaper.file.id}") no-repeat; }
      - else
        :css
          body { background: url("/img/default.jpg") no-repeat; }
  %body
    - if settings.video["enabled"] == true
      %video{:autoplay => true, :muted => true, :preload => "none", :loop => true}
        %source{:src => "/videos/#{settings.video["file"]}"}
    #contain
      %header.row
        - if !@marquees.blank?
          %ul#marquee
            - @marquees.each do |marquee|
              %li= marquee.text
      %section#main.row
        #left.sevencol
          %ol#periods
            - if !@periods.blank?
              - @periods.each do |period|
                %li
                  ="#{period.text}: "
                  %time.start{:datetime => seconds(period.start)}="#{local(period.start)}"
                  &mdash;
                  %time.finish{:datetime => seconds(period.finish)}="#{local(period.finish)}"
        #right.fivecol.last
          %section#clock
            %p#date
            %p#time
          %section#notices
            %ol
              - if !@notices.blank?
                - @notices.each do |notice|
                  %li{:class => notice.urgent}= notice.text
    %script{:src => "/jsc/lib/jquery.js"}
    %script{:src => "/jsc/lib/pusher.min.js"}
    %script{:src => "/jsc/lib/jquery.marquee.js"}
    %script{:src => "/jsc/lib/jquery.fittext.js"}
    %script{:src => "/jsc/application.js"}
